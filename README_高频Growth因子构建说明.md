# 高频Growth因子构建说明

## 方法概述

基于国泰君安报告中2.1.4(2)部分的方法，利用周频资产价格拟合月频Growth宏观因子，得到高频Growth因子。

## 数据说明

### 输入数据
- **macro.csv**: 月频宏观因子数据，包含Growth因子
- **grow_data.csv**: 周频资产价格数据，包含4个资产：
  - S0031510
  - S0105912
  - M0049225
  - HSI

### 输出数据
- **high_freq_growth.csv**: 高频Growth因子（周频）
- **growth_weights.csv**: 各资产的回归权重
- **high_freq_growth_comparison.png**: 高频因子与原始因子对比图
- **high_freq_growth_correlation.png**: 两者相关性散点图

## 构建步骤

### Step 1: 计算资产对数同比序列
- 对四个资产价格取对数
- 计算52周（约1年）对数同比：`log(P_t) - log(P_{t-52})`
- 作为自变量 X

### Step 2: 领先滞后回归
- 测试领先期范围：-6至+6个月
- 对每个领先期，将月频Growth因子与X进行多元线性回归
- 选择R²最高的领先期和回归系数

### Step 3: 归一化权重
- 取回归系数的绝对值
- 归一化使权重和为1
- 得到各资产的权重

### Step 4: 构建高频因子
- 计算周频资产的环比序列：`log(P_t) - log(P_{t-1})`
- 用归一化权重加权环比序列
- 累积求和得到高频Growth因子水平值

## 结果

### 最优回归参数
根据脚本输出，最优领先期和各资产权重为：

| 资产 | 归一化权重 | 原始回归系数 |
|------|-----------|-------------|
| S0031510 | 57.47% | 0.2154 |
| S0105912 | 16.18% | -0.0606 |
| M0049225 | 7.03% | -0.0263 |
| HSI | 19.32% | 0.0724 |

### 模型拟合效果
- 最优领先期：见脚本输出
- R²值：见脚本输出
- 相关系数：见散点图

## 可视化结果

### 1. 时间序列对比图
`high_freq_growth_comparison.png` 展示了：
- 蓝色线：高频Growth因子（周频）
- 橙色线：原始Growth因子（月频）

高频因子提供了更细粒度的波动信息，同时保持了与月频因子的趋势一致性。

### 2. 相关性散点图
`high_freq_growth_correlation.png` 展示了：
- 高频因子（月末值）与原始月频因子的相关性
- 相关系数反映了两者的拟合程度

## 使用方法

```python
import pandas as pd

# 读取高频Growth因子
high_freq_growth = pd.read_csv('high_freq_growth.csv', index_col=0, parse_dates=True)

# 读取权重信息
weights = pd.read_csv('growth_weights.csv')
```

## 注意事项

1. **数据对齐**：周频数据转月频时使用月末值
2. **领先滞后**：考虑了资产价格对宏观因子的领先或滞后关系
3. **权重归一化**：确保权重和为1，便于解释
4. **累积求和**：环比序列累积得到水平值，便于与原始因子对比

## 扩展应用

构建的高频Growth因子可用于：
- 资产配置的高频调整
- 宏观趋势的实时跟踪
- 与其他高频指标的联合分析
- 构建高频交易策略

## 参考文献

国泰君安，《大类资产配置量化模型研究系列之四：基于宏观因子的大类资产配置框架》，2023年6月14日
